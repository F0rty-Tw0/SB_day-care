<!DOCTYPE html>
<html lang="en">

  <head th:include="shared/head :: head (pageTitle='View all Children')" />

  <body>
    <div class="page">
      <div th:include="shared/navbar :: navbar (active='children')" />
      <div class="container">
        <h1 class="page__header">Displaying all the Children</h1>
        <table class="table table-hover table-borderless shadowed">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name:</th>
              <th scope="col">Group:</th>
              <th scope="col">Age:</th>
              <th scope="col">Mother's Name:</th>
              <th scope="col">Father's Name:</th>
              <th th:if="${session.isValidated}" scope="col">Edit Children:</th>

            </tr>
          </thead>
          <tbody>
            <tr th:each="kid : ${myKids}">
              <form>
                <th class="w-5" scope="row">
                  <span th:text="${kid.getKidId()}"></span>
                  <div th:if="${session.isValidated}">
                    <input class="d-none" th:value="${kid.getKidId()}" name="id" type="number">
                  </div>
                </th>
                <td  class="w-20" >
                  <span th:text="${kid.getKidName()}"></span>
                  <div th:if="${session.isValidated}" class="collapse edit__menu"
                    th:id="'children' + ${kid.getKidId()}">
                    <input class="form-control edit__options shadowed-light" th:value="${kid.getKidName()}" name="name" type="text">
                  </div>
                </td>
                <td  class="w-15" >
                  <span th:text="${interfaceGroupService.findGroupById(kid.getKidGrpId()).getGrpName()}"></span>
                  <div th:if="${session.isValidated}" class="collapse edit__menu"
                    th:id="'children' + ${kid.getKidId()}">
                    <select name="group" class="form-control edit__options shadowed-light form-select" aria-label="Group selector">
                      <option th:each="group : ${interfaceGroupService.viewAllGroups()}" th:text="${group.getGrpName()}"
                        th:selected="${interfaceGroupService.findGroupById(kid.getKidGrpId()).getGrpName().equals(group.getGrpName())}"
                        th:value="${group.getGrpId()}"></option>
                    </select>
                  </div>
                </td>
                <td class="w-10">
                  <span th:text="${kid.getKidAge()}"></span>
                  <div th:if="${session.isValidated}" class="collapse edit__menu"
                    th:id="'children' + ${kid.getKidId()}">
                    <input class="form-control edit__options shadowed-light" th:value="${kid.getKidAge()}" name="age" type="number"
                      min="1" max="9">
                  </div>
                </td>
                <td>
                  <span th:text="${interfaceParentService.findParentById(kid.getKidParentId()).getMomName()}"></span>
                  <div th:if="${session.isValidated}" class="collapse edit__menu"
                    th:id="'children' + ${kid.getKidId()}">
                    <select name="parents" class="form-control edit__options shadowed-light form-select form__parents-sellect" aria-label="Group selector">
                      <option th:each="parent : ${myParents}" th:text="${parent.getMomName() + ' & '+ parent.getDadName()}"
                        th:selected="${interfaceParentService.findParentById(kid.getKidParentId()).getMomName().equals(parent.getMomName())}"
                        th:value="${parent.getParentId()}"></option>
                    </select>
                  </div>
                </td>
                <td th:text="${interfaceParentService.findParentById(kid.getKidParentId()).getDadName()}"></td>

                <td th:if="${session.isValidated}">
                  <button type="button" class="text-uppercase btn btn-warning" data-bs-toggle="collapse"
                    th:href="'#children' + ${kid.getKidId()}" aria-expanded="false">Edit</button>
                  <button type="button" th:onclick="pageTransition()" class="text-uppercase btn btn-danger">Delete</button>
                  <div class="collapse" th:id="'children' + ${kid.getKidId()}">
                    <button type="submit" th:onclick="pageTransition()"
                      class="text-uppercase btn btn-success button__save">SAVE</button>
                  </div>
                </td>
              </form>
            </tr>
          </tbody>
        </table>

      </div>
      <footer th:include="shared/footer :: footer" class="mt-5" />
    </div>
  </body>

</html>